<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    
    <title>What is a Web Request | Junior 2 Senior</title>
    <meta name="description" content="">
    <meta name="author" content="">
    
    <link rel="apple-touch-icon" sizes="180x180" href=https://jr2sr.netlify.app/apple-touch-icon.png>
    <link rel="icon" type="image/png" sizes="32x32" href=https://jr2sr.netlify.app/favicon-32x32.png>
    <link rel="icon" type="image/png" sizes="16x16" href=https://jr2sr.netlify.app/favicon-16x16.png>
    <link rel="manifest" href=https://jr2sr.netlify.app/site.webmanifest>
    <link rel="mask-icon" href=https://jr2sr.netlify.app/safari-pinned-tab.svg color="#00416a">
    <meta name="msapplication-TileColor" content="#00aba9">
    <meta name="theme-color" content="#ffffff">
    
    
    
    
    
    
    <link rel="authorization_endpoint" href=https://indieauth.com/auth />
    <link rel="token_endpoint" href=https://tokens.indieauth.com/token />
    
    
    
    
    <link rel="stylesheet" href=https://jr2sr.netlify.app/css/fonts.css />
    <link rel="stylesheet" href=https://jr2sr.netlify.app/css/style.css />
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-169090877-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-169090877-1');
    </script>
</head>

<body>
    <div id="sitelogo">
        <a class="glyph" alt="Home" href="https://jr2sr.netlify.app/"><img src=https://jr2sr.netlify.app/images/site-logo.svg alt="Site Logo" height="64px" width="64px"></a>
    </div>
    <header>
        <nav>
    
    <div id="page-nav">
        <div class="page-nav-item">
            <a href="https://jr2sr.netlify.app/">Home</a>
        </div>
        
    </div>
</nav>
        
    </header>




<div id="content">
    <article class="h-entry">
        <header>
            <h1 class="post-title p-name">What is a Web Request</h1>
            
            <p class="post-date">Posted on
                <time class="dt-published" datetime="2020-04-10T12:53:57&#43;02:00">
                10 April, 2020 at 12:53 CEST
                </time>  by <a href="https://jr2sr.netlify.app/" class="p-author h-card" rel="author">Paul DiGian</a>
            </p>
            
            
	    
<br>

<div style="background-color: #ffff645e; padding: 1.5em; margin-bottom: 1em;">
  <p><b>What is a Web Request</b> is part of <a href="https://gumroad.com/l/junior2senior">Junior2Senior</a> a course to help you grow as software engineers.</p>
  <p>It is about unloading all the knowledge that I accumulate over my career to younger engineers to help speed up their own career.</p>
  <p> You can follow me on twitter as well 
    <a href="https://twitter.com/DigianPaul?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-size="large" data-dnt="true" data-show-count="false">Follow @DigianPaul</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </p>
  <p>The book is actually on pre-sale 50% off for only 19$.</p>
  <script async src="https://gumroad.com/js/gumroad.js"></script>
  <div style="text-align: center;">
    <a class="gumroad-button" href="https://gum.co/HjDwM" target="_blank">Buy Junior2Senior</a>
  </div>
</div>

        </header>
        <section class="content e-content">
            <div id="preamble">
<div class="sectionbody">
<div class="imageblock">
<div class="content">
<img src="/whats-a-web-request.jpg" alt="Networks Cables - Photo by Jordan Harrison on Unsplash">
</div>
</div>
<div class="paragraph">
<p>The web and internet as a large are fundamental for today&#8217;s world, but how does it work under the hood?</p>
</div>
<div class="paragraph">
<p>In this article, we will talk about HTTP requests that are the fundamentals blocks that make the modern web possible.</p>
</div>
<div class="paragraph">
<p>We will explore how tools like <a href="https://requests.readthedocs.io/en/master/">Python <code>requests</code></a> or <a href="https://ruby-doc.org/stdlib-2.7.0/libdoc/net/http/rdoc/Net/HTTP.html">Ruby <code>Net::HTTP</code></a> or again the <a href="https://golang.org/pkg/net/http/">Go package <code>net/http</code></a> or any other library that you may use in any other language works.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_aha_moment">The Aha moment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Reasoning about the topic becomes extremely simple as soon as we figure out what is an HTTP request, and the reality is extremely simple.</p>
</div>
<div class="paragraph">
<p>An HTTP request is nothing more than a stream of bytes, almost always ASCII bytes that it is possible to read and interpret. To put it even more simply, it is just a string formatted following some rule.</p>
</div>
<div class="paragraph">
<p>The one below is already a complete HTTP request and this is the most important concept. An HTTP request is nothing more than strings of text similar to this one.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>GET / HTTP/2
Host: www.google.com
User-Agent: curl/7.58.0
Accept: */*</code></pre>
</div>
</div>
<div class="paragraph">
<p>An HTTP response is not that different:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>HTTP/2 200
date: Fri, 10 Apr 2020 11:25:36 GMT
expires: -1
cache-control: private, max-age=0
content-type: text/html; charset=ISO-8859-1
p3p: CP="This is not a P3P policy! See g.co/p3phelp for more info."
server: gws
x-xss-protection: 0
x-frame-options: SAMEORIGIN
set-cookie: 1P_JAR=2020-04-10-11; expires=Sun, 10-May-2020 11:25:36 GMT; path=/; domain=.google.com; Secure
set-cookie: NID=202=lXbpl7jzwsRDvcSyw84CtGB7NO3J2HziT0SjF24N4joVsoUzXNRdc03yTeckZu2zQXc8TJty73IYg9ktX3yrtSb59lC1-jxyTprH_wGly4D2RiFC4Ww1T2Om69YYjxDtkgEDmQbqoYYyzahBQowvSM-q5JpF6hoC-gzLRTnnn38; expires=Sat, 10-Oct-2020 11:25:36 GMT; path=/; domain=.google.com; HttpOnly
alt-svc: quic=":443"; ma=2592000; v="46,43",h3-Q050=":443"; ma=2592000,h3-Q049=":443"; ma=2592000,h3-Q048=":443"; ma=2592000,h3-Q046=":443"; ma=2592000,h3-Q043=":443"; ma=2592000,h3-T050=":443"; ma=2592000
accept-ranges: none
vary: Accept-Encoding

&lt;!doctype html&gt;&lt;html&gt; ...THE_HTML_OF_THE_GOOGLE_HOMEPAGE... &lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>All those libraries and frameworks are just a way to create, interpret and send over the network strings that look like this.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_http_rules_and_protocol">The HTTP rules and protocol</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The rules to create a correct HTTP request are encoded in an <a href="https://tools.ietf.org/html/rfc7230">RFC 7230</a> it can be interesting to explore the document and understand at least some of the details, but for most developer will be an overkill.
However, if your work orbit a lot around the web infrastructure it can be necessary.</p>
</div>
<div class="paragraph">
<p>For instance, <a href="https://tools.ietf.org/html/rfc7230#section-3">Section 3 of RFC 7230</a> describe formally what is an <code>HTTP message</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>HTTP-message = start-line
               *( header-field CRLF )
               CRLF
               [ message-body ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This definition means that an <code>HTTP-message</code> is nothing else than a <code>start-line</code>, followed by 0 or more <code>header-field</code> each followed by a CRLF (a new line <code>\r\n</code>), another new line and an optional <code>message-body</code>.</p>
</div>
<div class="paragraph">
<p>Keep reading the RFC we will discover what is <a href="https://tools.ietf.org/html/rfc7230#section-3.1.1"><code>start-line</code> on section 3.1</a> and so on.</p>
</div>
<div class="paragraph">
<p>It turns out that the <code>start-line</code> of a request specify the method of the request, either <code>GET</code>, <code>HEAD</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>, <code>CONNECT</code>, <code>OPTIONS</code> or <code>TRACE</code> all documented in <a href="https://tools.ietf.org/html/rfc7231#section-4">RFC 7231 Section 4</a>.
Most developers just need to be aware of all the possible methods, but they won&#8217;t use all of them.</p>
</div>
<div class="paragraph">
<p>Then it specifies what is the target of the request, in our case the root directory <code>/</code>.</p>
</div>
<div class="paragraph">
<p>And finally, it specifies what protocol to use in the communication, in this case, we use <code>HTTP/2</code>, another common one is <code>HTTP/1.1</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_keeping_state_authentication_and_cookie">Keeping state, authentication, and cookie</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The HTTP protocol is mostly stateless, there is nothing that forbids a client to request somebody private records on a social network protocol after all an HTTP request is just a string formatted following some rules.</p>
</div>
<div class="paragraph">
<p>However, the server needs to forbid those requests.</p>
</div>
<div class="paragraph">
<p>To overcome the limitation imposed by being a stateless protocol, HTTP relies on the concept of Cookies.</p>
</div>
<div class="paragraph">
<p>An HTTP response, generated by an HTTP server, can include the <code>Set-Cookie</code> header (the name is case insensitive, the request above to google.com returned <code>set-cookie</code>).
The <code>Set-Cookie</code> header instructs the <code>user-agent</code> (the client, with some level of approximation) to store the value of the cookie and to send it to the server to any subsequent request using the <code>Cookie</code> header.</p>
</div>
<div class="paragraph">
<p>Another <a href="https://tools.ietf.org/html/rfc6265">RFC (6265)</a> covers this topic extensively.</p>
</div>
<div class="paragraph">
<p>For most developer is sufficient to know that the <code>Set-Cookie</code> header provides some options to tweak how the client manages the cookie.</p>
</div>
<div class="paragraph">
<p>For instance, the <code>Path</code> attribute indicates that the cookie should be sent only for requests against a specific URL path.</p>
</div>
<div class="paragraph">
<p>The <code>Secure</code> indicates that the cookie should not be sent on insecure connections.</p>
</div>
<div class="paragraph">
<p>Finally the <code>HttpOnly</code> indicate that the cookie should not be accessible outside the HTTP protocol, for instance, it should not be read using the JS API on the browser.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_closing_thoughts">Closing thoughts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>While the protocol itself is rather simple, after all, it is just about concatenating strings and keep tracks of cookies, the necessities of modern software forced us to build complex systems to extract as much performance as possible while keeping an ergonomic interface.</p>
</div>
<div class="paragraph">
<p>Most likely developers would like to make more requests in parallel while maybe sharing some cookies but not all.</p>
</div>
<div class="paragraph">
<p>All these real-world necessities and use case makes the software explode in complexity, but also in usefulness.</p>
</div>
<div class="paragraph">
<p>However <code>HTTP</code> remains a simple protocol and the CPython codebase <a href="https://github.com/python/cpython/blob/3.8/Lib/http/client.py#L1096-L1098">offers a glimpse of this simplicity.</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python">request = '%s %s %s' % (method, url, self._http_vsn_str)
self._output(self._encode_request(request))</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is creating the <code>start-line</code> of an HTTP message, just like we did at the very beginning of this post with <code>GET / HTTP/2</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exercises">Exercises</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a function to create HTTP requests.
As input, you can expect the methods (<code>GET</code>, <code>POST</code>, etc&#8230;&#8203;), the host and the URL of the resource.
You can expand the little function to support also headers?
And how would you manage cookies?</p>
</div>
<div class="paragraph">
<p>In the next section, we will discover DNS, sockets, and TCP. So it will be possible to actually send a request and read back the response.</p>
</div>
<div class="sect2">
<h3 id="_bonus_trivial">Bonus Trivial</h3>
<div class="paragraph">
<p>From the standard of <code>HTTP1.1</code>, the headers are strictly optional, indeed they are defined like this <code>*( header-field CRLF)</code> where the star (<code>*</code>) means <strong>zero</strong> or more repetition.
However, the same standard dictates that the <code>Host</code> header <a href="https://tools.ietf.org/html/rfc7230#section-5.4"><strong>must</strong> be present</a>.</p>
</div>
<div class="paragraph">
<p>This clear inconsistency was introduced to keep backward compatibility so that every <code>HTTP1.1</code> request is also an <code>HTTP1.0</code> request.</p>
</div>
<div class="paragraph">
<p>This is a clear example of how the world evolves from mistakes and error and also something as widespread and used as "the internet" was designed with some initial mistakes. After all, we are human and the success of the <code>HTTP</code> was not sure.</p>
</div>
</div>
</div>
</div>

        </section>
        <footer>
            <a class="permalink u-url" href="https://jr2sr.netlify.app/posts/whats-a-web-request/"></a>
            
        </footer>
    </article>

  
<br>

<div style="background-color: #ffff645e; padding: 1.5em; margin-bottom: 1em;">
  <p><b>What is a Web Request</b> is part of <a href="https://gumroad.com/l/junior2senior">Junior2Senior</a> a course to help you grow as software engineers.</p>
  <p>It is about unloading all the knowledge that I accumulate over my career to younger engineers to help speed up their own career.</p>
  <p> You can follow me on twitter as well 
    <a href="https://twitter.com/DigianPaul?ref_src=twsrc%5Etfw" class="twitter-follow-button" data-size="large" data-dnt="true" data-show-count="false">Follow @DigianPaul</a><script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </p>
  <p>The book is actually on pre-sale 50% off for only 19$.</p>
  <script async src="https://gumroad.com/js/gumroad.js"></script>
  <div style="text-align: center;">
    <a class="gumroad-button" href="https://gum.co/HjDwM" target="_blank">Buy Junior2Senior</a>
  </div>
</div>


  <br>
<p>Signup to receive notification about new articles</p>


<link href="//cdn-images.mailchimp.com/embedcode/horizontal-slim-10_7.css" rel="stylesheet" type="text/css">
<style type="text/css">
#mc_embed_signup{background:#fff; clear:left; font:14px Helvetica,Arial,sans-serif; width:100%;}
 
</style>
<div id="mc_embed_signup">
  <form action="https://rhcloud.us5.list-manage.com/subscribe/post?u=2c818251de1f8592ef01e8ad0&amp;id=fc2722647b" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
    <div id="mc_embed_signup_scroll">
      <label for="mce-EMAIL">Subscribe to Junior 2 Senior</label>
      <input type="email" value="" name="EMAIL" class="email" id="mce-EMAIL" placeholder="email address" required>
      
      <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_2c818251de1f8592ef01e8ad0_fc2722647b" tabindex="-1" value=""></div>
      <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
    </div>
  </form>
</div>




</div>

    
    <div id="footer">
      
      <nav id="article-skip">
        <div class="next">
          
          <a alt="Newer article" href="https://jr2sr.netlify.app/posts/database_fundamental/">&larr; Newer</a>
          
        </div>
        <div class="top">
          <a alt="Top of page" href="#">Top</a>
        </div>
        <div class="prev">
          
          <a alt="Older article" href="https://jr2sr.netlify.app/posts/start_here/">Older &rarr;</a>
          
        </div>
      </nav>
      
      <aside id="social">
  <div id="social-icons">
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="icon-24x24">
      <a class="glyph" alt="Twitter profile" href="https://twitter.com/@pauldigian"><img src=https://jr2sr.netlify.app/icons/twitter.svg height="24px" width="24px"></a>
     </div>
     
  </div>
</aside>

      
    </div>


</body>
</html>
